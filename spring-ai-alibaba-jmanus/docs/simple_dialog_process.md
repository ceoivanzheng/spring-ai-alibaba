# 简单对话流程

## 核心逻辑框架

流程的核心逻辑是以 **"目标"** 为导向，通过 **"输入"** 提供基础，由 **"参与者"** 按 **"规则"** 执行 **"活动"**（活动间按 **"逻辑关系"** 衔接），消耗 **"资源"**，最终产生 **"输出"** 以达成目标。

## 用例场景流程

### 场景描述

用户在JManus系统首页输入："你是哪个模型？"，系统需要识别用户意图并返回当前使用的AI模型信息。

### 流程要素分析表


| 要素         | 内容                                                                    | 具体描述                                                                                            |
| ------------ | ----------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| **目标**     | 提供AI模型信息                                                          | 准确识别用户查询意图，返回当前JManus系统使用的AI模型相关信息                                        |
| **输入**     | 用户简单查询                                                            | "你是哪个模型？"                                                                                    |
| **参与者**   | - 用户<br>- JManus AI系统<br>- 意图识别模块<br>- 系统配置模块           | - 用户：提出查询<br>- JManus AI：理解和回复<br>- 意图识别：分析查询类型<br>- 配置模块：提供模型信息 |
| **规则**     | - 意图识别规则<br>- 信息获取规则<br>- 回复格式规则<br>- 隐私保护规则    | - 识别模型查询意图<br>- 获取当前模型配置<br>- 友好格式回复<br>- 不泄露敏感配置                      |
| **活动**     | 1. 输入解析<br>2. 意图识别<br>3. 信息获取<br>4. 回复生成<br>5. 结果输出 | 详见下方活动流程表                                                                                  |
| **逻辑关系** | 顺序执行                                                                | 各活动按线性顺序执行，无复杂分支逻辑                                                                |
| **资源**     | - AI推理能力<br>- 系统配置信息<br>- 模型元数据<br>- 自然语言生成        | - 意图理解算法<br>- 配置文件读取<br>- 模型信息存储<br>- 文本生成能力                                |
| **输出**     | AI模型信息回复                                                          | 包含模型名称、版本、能力描述等用户友好的信息                                                        |

### 详细活动流程表


| 序号 | 活动名称 | 执行者       | 输入           | 输出           | 资源消耗       | 成功条件                     |
| ---- | -------- | ------------ | -------------- | -------------- | -------------- | ---------------------------- |
| 1    | 输入解析 | JManus AI    | 用户原始输入   | 标准化查询文本 | 文本预处理能力 | 成功解析用户输入字符串       |
| 2    | 意图识别 | 意图识别模块 | 标准化查询文本 | 查询意图类型   | AI推理能力     | 正确识别为"模型信息查询"意图 |
| 3    | 信息获取 | 系统配置模块 | 查询意图       | 模型配置数据   | 配置文件访问   | 成功获取当前模型配置信息     |
| 4    | 回复生成 | JManus AI    | 模型配置数据   | 格式化回复文本 | 自然语言生成   | 生成用户友好的回复内容       |
| 5    | 结果输出 | JManus AI    | 格式化回复文本 | 最终用户回复   | 界面渲染能力   | 成功显示回复给用户           |

### 意图识别规则表


| 关键词模式     | 意图类型     | 置信度 | 处理方式         |
| -------------- | ------------ | ------ | ---------------- |
| "你是哪个模型" | 模型信息查询 | 高     | 直接返回模型信息 |
| "什么模型"     | 模型信息查询 | 高     | 直接返回模型信息 |
| "模型版本"     | 模型信息查询 | 中     | 返回模型版本信息 |
| "AI类型"       | 模型信息查询 | 中     | 返回AI类型说明   |

### 回复模板表


| 信息类型 | 回复模板                                         | 示例内容                                                   |
| -------- | ------------------------------------------------ | ---------------------------------------------------------- |
| 模型名称 | 我是基于 {model_name} 的AI助手                   | 我是基于通义千问的AI助手                                   |
| 模型版本 | 当前使用的是 {model_name} {version} 版本         | 当前使用的是通义千问 2.5 版本                              |
| 能力描述 | 我可以帮助您进行 {capabilities}                  | 我可以帮助您进行对话交流、问题解答、任务协助等             |
| 完整信息 | 我是 {model_name}，{description}，{capabilities} | 我是通义千问，一个大型语言模型，可以进行对话交流和任务协助 |

### 异常处理流程


| 异常情况     | 处理策略         | 备选方案         |
| ------------ | ---------------- | ---------------- |
| 意图识别失败 | 使用通用回复模板 | 引导用户重新提问 |
| 配置信息缺失 | 返回默认模型信息 | 提示系统配置问题 |
| 回复生成失败 | 使用预设回复     | 返回简单确认信息 |

### 性能指标


| 指标类型           | 目标值  | 测量方法                   |
| ------------------ | ------- | -------------------------- |
| **响应时间**       | < 1秒   | 从输入到输出的总耗时       |
| **意图识别准确率** | > 95%   | 正确识别模型查询意图的比例 |
| **用户满意度**     | > 90%   | 回复内容的有用性评分       |
| **系统可用性**     | > 99.9% | 成功处理查询的比例         |

### 流程优化点

1. **缓存机制**：缓存模型信息，避免重复读取配置
2. **意图扩展**：支持更多模型相关查询变体
3. **个性化回复**：根据用户历史偏好调整回复风格
4. **多语言支持**：支持不同语言的模型查询
5. **实时更新**：当模型配置变更时及时更新回复内容

### 测试用例


| 测试输入         | 预期输出类型 | 验证要点               |
| ---------------- | ------------ | ---------------------- |
| "你是哪个模型？" | 模型信息回复 | 包含模型名称和基本描述 |
| "什么AI？"       | 模型信息回复 | 正确识别查询意图       |
| "版本信息"       | 版本信息回复 | 包含具体版本号         |
| "你能做什么？"   | 能力描述回复 | 列出主要功能特性       |
